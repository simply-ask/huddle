{% extends 'base.html' %}
{% load static %}

{% block title %}Voice Setup Error{% endblock %}

{% block extra_head %}
<style>
    .error-container {
        max-width: 600px;
        margin: 0 auto;
        padding: 40px 20px;
        text-align: center;
    }
    .error-icon {
        font-size: 80px;
        color: #dc3545;
        margin-bottom: 20px;
    }
    .error-header {
        color: #dc3545;
        margin-bottom: 20px;
    }
    .error-message {
        background: #f8d7da;
        border: 1px solid #f5c6cb;
        color: #721c24;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        font-size: 16px;
        line-height: 1.5;
    }
    .help-section {
        background: #e2e3e5;
        padding: 25px;
        border-radius: 8px;
        margin: 30px 0;
        text-align: left;
    }
    .help-section h3 {
        color: #495057;
        margin-top: 0;
    }
    .action-buttons {
        margin: 30px 0;
    }
    .btn {
        display: inline-block;
        padding: 15px 30px;
        margin: 10px;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.3s;
    }
    .btn-primary {
        background: #007bff;
        color: white;
    }
    .btn-primary:hover {
        background: #0056b3;
        color: white;
    }
    .btn-secondary {
        background: #6c757d;
        color: white;
    }
    .btn-secondary:hover {
        background: #545b62;
        color: white;
    }
    .contact-info {
        background: #cce5ff;
        border: 1px solid #99ccff;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
    }
    .contact-info h4 {
        color: #0066cc;
        margin-top: 0;
    }
</style>
{% endblock %}

{% block content %}
<div class="error-container">
    <div class="error-icon">‚ùå</div>
    <h1 class="error-header">Voice Setup Error</h1>
    
    <div class="error-message">
        {{ error }}
    </div>

    <div class="help-section">
        <h3>ü§î What went wrong?</h3>
        <p>There are a few common reasons why voice setup might fail:</p>
        <ul>
            <li><strong>Expired Link:</strong> Voice setup links expire after 7 days for security</li>
            <li><strong>Already Used:</strong> Each setup link can only be used once</li>
            <li><strong>Invalid Parameters:</strong> The link may be incomplete or corrupted</li>
            <li><strong>Meeting Inactive:</strong> The meeting may have ended or been cancelled</li>
        </ul>
    </div>

    <div class="help-section">
        <h3>‚úÖ How to fix this:</h3>
        <ol>
            <li><strong>Check your email</strong> for the most recent invitation</li>
            <li><strong>Use the latest link</strong> if you received multiple invitations</li>
            <li><strong>Contact the meeting host</strong> to request a new setup link</li>
            <li><strong>Verify the meeting</strong> is still active and scheduled</li>
        </ol>
    </div>

    <div class="action-buttons">
        <a href="javascript:history.back()" class="btn btn-secondary">
            ‚¨ÖÔ∏è Go Back
        </a>
        <a href="/" class="btn btn-primary">
            üè† Return to Home
        </a>
    </div>

    <div class="contact-info">
        <h4>üìß Need Help?</h4>
        <p>If you continue to have issues with voice setup, please:</p>
        <ul>
            <li>Contact the meeting host directly</li>
            <li>Forward your original invitation email</li>
            <li>Mention the specific error message above</li>
        </ul>
        <p><small>Meeting organizers can generate new setup links from the meeting dashboard.</small></p>
    </div>

    <div style="margin-top: 40px; padding: 15px; background: #fff3cd; border-radius: 8px; color: #856404; font-size: 14px;">
        <strong>Note:</strong> Voice setup is optional but highly recommended for accurate speaker identification during meetings. You can still join the meeting without completing voice setup.
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Auto-focus on the primary action button
    const primaryBtn = document.querySelector('.btn-primary');
    if (primaryBtn) {
        primaryBtn.focus();
    }
    
    // Log error for debugging (remove in production)
    console.log('Voice setup error:', '{{ error|escapejs }}');
    
    // Optional: Send error analytics
    // trackEvent('voice_setup_error', { error: '{{ error|escapejs }}' });
});
</script>
{% endblock %}